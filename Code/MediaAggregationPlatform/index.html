<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>

<p id="p1">Twitter Display Demo</p>
<p id="twitterDisplay"></p>

<script>
    var Twitter = require('twitter');

    var client = new Twitter({
        consumer_key: process.env.TWITTER_CONSUMER_KEY,
        consumer_secret: process.env.TWITTER_CONSUMER_SECRET,
        access_token_key: process.env.TWITTER_ACCESS_TOKEN_KEY,
        access_token_secret: process.env.TWITTER_ACCESS_TOKEN_SECRET
    });

    var query;
    // Trending hashtags in the United States
    client.get('https://api.twitter.com/1.1/trends/place.json?id=23424977', function(error, trends) {
        if(error) throw error;
        query = trends[0].trends[0].query;
        //console.log(query);
        //console.log(trends[0].trends[0].name);
        //console.log(trends[0].trends[0].url);
    });
    var embedLink;
    var oembedFormat;
    client.get('search/tweets', {q: '%22Jacob+Wohl%22'}, function(error, tweets, response) {
        //console.log(tweets);
        var user = tweets.statuses[0].user.screen_name;
        user.replace(/\s+/g, '');
        var id = tweets.statuses[0].id_str;
        var link = 'https://twitter.com/' + user + '/status/' + id;
        embedLink = 'https://publish.twitter.com/oembed?url=' + link;

        client.get(embedLink, function(error, embed) {
            oembedFormat = embed.html;
            document.getElementById("twitterDisplay").appendChild(oembedFormat);
            console.log(oembedFormat);
        });
    });
</script>

</body>
</html>